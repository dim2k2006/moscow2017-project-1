!function(){if(!("modules"in app&&"modal"in app.modules)){var e=function(){var e=this;e.html="",e.body="",e.container=document.querySelector(".modal"),e.openButton=document.querySelector(".modal_trigger"),e.closeButton=document.querySelector(".modal_close"),e.setupListener=function(){e.body.addEventListener("click",e.router)},e.router=function(t){var n=t.target;n.classList.contains("modal_trigger")?(t.preventDefault(),e.open(t.target)):n.classList.contains("modal_close")&&(t.preventDefault(),e.close(t.target))},e.open=function(t){var n=t.getAttribute("href"),o=document.querySelector(n);e.html.classList.add("modal_state_open"),o.classList.add("modal_state_open")},e.close=function(t){var n=t.closest(".modal");n.classList.remove("modal_state_open"),e.html.classList.remove("modal_state_open")},e.importDefaults=function(){e.html=app.modules.main.html,e.body=app.modules.main.body},e.init=function(){e.container&&(e.importDefaults(),e.setupListener())}};"modules"in app||(app.modules={}),app.modules.modal=new e}}();var initApp=function(){if(!("modules"in app&&"main"in app.modules)){var e=function(){var e=this;e.html=document.querySelector("html"),e.body=document.querySelector("body"),e.modules=app.modules,e.library=new Library,e.initLibrary=function(){e.library.init()},e.initModules=function(){for(var t in e.modules)e.modules.hasOwnProperty(t)&&"undefined"!=typeof e.modules[t].init&&"main"!==t&&"library"!==t&&e.modules[t].init()},e.init=function(){e.initLibrary(),e.initModules()}};"modules"in app||(app.modules={}),app.modules.main=new e,app.modules.main.init()}};window.addEventListener("load",initApp),function(){if(!("modules"in app&&"schedule"in app.modules)){var e=function(){var e=this;e.body="",e.getSchedule="",e.getPlace="",e.getSchool="",e.getAuthor="",e.expand="",e.container=document.querySelector(".schedule"),e.content=document.querySelector(".scheduleList__content"),e.template=document.querySelector("#scheduleItem-template").innerHTML,e.monthNames=["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],e.dataList="",e.setupListener=function(){},e.getData=function(){var t="",n="",o="";e.getSchedule(t,n,o).then(function(t){e.render(t)})},e.render=function(t){var n=document.createElement("ul");n.classList.add("scheduleList__list"),t.lectures.forEach(function(o){var i=document.createElement("li");i.classList.add("scheduleList__item"),i.innerHTML=e.template;var a=new Date(o.date),l=a.getDate(),u=e.monthNames[a.getMonth()];i.querySelector(".scheduleItem__day").innerHTML=l,i.querySelector(".scheduleItem__month").innerHTML=u,i.querySelector(".scheduleItem__time").innerHTML=o.time,i.querySelector(".scheduleItem__title").innerHTML=o.title,i.querySelector(".scheduleItem__place__link").innerHTML=e.expand([o.place],{title:"places",data:t.places}),n.appendChild(i)}),e.content.innerHTML="",e.content.appendChild(n)},e.importDefaults=function(){e.body=app.modules.main.body,e.getSchedule=app.modules.main.library.getSchedule,e.expand=app.modules.main.library.expand},e.init=function(){e.container&&(e.importDefaults(),e.getData(),e.setupListener())}};"modules"in app||(app.modules={}),app.modules.schedule=new e}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGFsL21vZGFsLmpzIiwibWFpbi9tYWluLmpzIiwic2NoZWR1bGUvc2NoZWR1bGUuanMiXSwibmFtZXMiOlsiYXBwIiwibW9kdWxlcyIsIk1vZGFsIiwic2VsZiIsInRoaXMiLCJodG1sIiwiYm9keSIsImNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm9wZW5CdXR0b24iLCJjbG9zZUJ1dHRvbiIsInNldHVwTGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwicm91dGVyIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInByZXZlbnREZWZhdWx0Iiwib3BlbiIsImNsb3NlIiwic3JjIiwiZ2V0QXR0cmlidXRlIiwiYWRkIiwiY2xvc2VzdCIsInJlbW92ZSIsImltcG9ydERlZmF1bHRzIiwibWFpbiIsImluaXQiLCJtb2RhbCIsImluaXRBcHAiLCJNYWluIiwibGlicmFyeSIsIkxpYnJhcnkiLCJpbml0TGlicmFyeSIsImluaXRNb2R1bGVzIiwibW9kdWxlIiwiaGFzT3duUHJvcGVydHkiLCJ3aW5kb3ciLCJTY2hlZHVsZSIsImdldFNjaGVkdWxlIiwiZ2V0UGxhY2UiLCJnZXRTY2hvb2wiLCJnZXRBdXRob3IiLCJleHBhbmQiLCJjb250ZW50IiwidGVtcGxhdGUiLCJpbm5lckhUTUwiLCJtb250aE5hbWVzIiwiZGF0YUxpc3QiLCJnZXREYXRhIiwiZGF0ZUZyb20iLCJkYXRlVG8iLCJwbGFjZSIsInRoZW4iLCJyZXNwb25zZSIsInJlbmRlciIsImNvbnRlbnRMaXN0IiwiY3JlYXRlRWxlbWVudCIsImxlY3R1cmVzIiwiZm9yRWFjaCIsIml0ZW0iLCJlbGVtZW50IiwiZGF0ZSIsIkRhdGUiLCJkYXkiLCJnZXREYXRlIiwibW9udGgiLCJnZXRNb250aCIsInRpbWUiLCJ0aXRsZSIsImRhdGEiLCJwbGFjZXMiLCJhcHBlbmRDaGlsZCIsInNjaGVkdWxlIl0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNBLEtBQUEs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d0IsaUJBRUF4QixFQUFBZ0QsVUFDQWhELEVBQUFTLGtCQU1BLFlBQUFaLE9BQ0FBLElBQUFDLFlBR0FELElBQUFDLFFBQUEwRSxTQUFBLEdBQUFuQyIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCdtb2R1bGVzJyBpbiBhcHAgJiYgJ21vZGFsJyBpbiBhcHAubW9kdWxlcykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBNb2RhbCBjbGFzcy5cbiAgICAgKiBAY2xhc3NcbiAgICAgKi9cbiAgICB2YXIgTW9kYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICBzZWxmLmh0bWwgPSAnJztcbiAgICAgICAgc2VsZi5ib2R5ID0gJyc7XG4gICAgICAgIHNlbGYuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJyk7XG4gICAgICAgIHNlbGYub3BlbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF90cmlnZ2VyJyk7XG4gICAgICAgIHNlbGYuY2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfY2xvc2UnKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5zZXR1cExpc3RlbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxmLnJvdXRlcik7XG4gICAgICAgICAgICAvLyBzZWxmLm9wZW5CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxmLm9wZW4pO1xuICAgICAgICAgICAgLy8gc2VsZi5jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHNlbGYuY2xvc2UpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBSb3V0ZSBjbGljayBldmVudFxuICAgICAgICAgKiBAcGFyYW0ge09iamVjdH0gZXZlbnRcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYucm91dGVyID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgIHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cbiAgICAgICAgICAgIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RhbF90cmlnZ2VyJykpIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBzZWxmLm9wZW4oZXZlbnQudGFyZ2V0KTtcblxuICAgICAgICAgICAgfSBlbHNlIGlmICh0YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdtb2RhbF9jbG9zZScpKSB7XG5cbiAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICAgICAgc2VsZi5jbG9zZShldmVudC50YXJnZXQpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5vcGVuID0gZnVuY3Rpb24odGFyZ2V0KSB7XG4gICAgICAgICAgICB2YXIgc3JjID0gdGFyZ2V0LmdldEF0dHJpYnV0ZSgnaHJlZicpLFxuICAgICAgICAgICAgICAgIGNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3Ioc3JjKTtcblxuICAgICAgICAgICAgc2VsZi5odG1sLmNsYXNzTGlzdC5hZGQoJ21vZGFsX3N0YXRlX29wZW4nKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdtb2RhbF9zdGF0ZV9vcGVuJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5jbG9zZSA9IGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRhcmdldC5jbG9zZXN0KCcubW9kYWwnKTtcblxuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX3N0YXRlX29wZW4nKTtcbiAgICAgICAgICAgIHNlbGYuaHRtbC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbF9zdGF0ZV9vcGVuJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEltcG9ydCBwcm9wZXJ0aWVzIGZyb20gTWFpbiBjbGFzc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5pbXBvcnREZWZhdWx0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5odG1sID0gYXBwLm1vZHVsZXMubWFpbi5odG1sO1xuICAgICAgICAgICAgc2VsZi5ib2R5ID0gYXBwLm1vZHVsZXMubWFpbi5ib2R5O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0IG1vZHVsZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb250YWluZXIpIHtcblxuICAgICAgICAgICAgICAgIHNlbGYuaW1wb3J0RGVmYXVsdHMoKTtcbiAgICAgICAgICAgICAgICBzZWxmLnNldHVwTGlzdGVuZXIoKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBpZiAoISgnbW9kdWxlcycgaW4gYXBwKSkge1xuICAgICAgICBhcHAubW9kdWxlcyA9IHt9O1xuICAgIH1cblxuICAgIGFwcC5tb2R1bGVzLm1vZGFsID0gbmV3IE1vZGFsKCk7XG59KSgpO1xuIiwidmFyIGluaXRBcHAgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoJ21vZHVsZXMnIGluIGFwcCAmJiAnbWFpbicgaW4gYXBwLm1vZHVsZXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgTWFpbiBjbGFzcy5cbiAgICAgKiBAY2xhc3NcbiAgICAgKi9cbiAgICB2YXIgTWFpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgc2VsZi5odG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpO1xuICAgICAgICBzZWxmLmJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG4gICAgICAgIHNlbGYubW9kdWxlcyA9IGFwcC5tb2R1bGVzO1xuICAgICAgICBzZWxmLmxpYnJhcnkgPSBuZXcgTGlicmFyeSgpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0IGxpYnJhcnkgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmluaXRMaWJyYXJ5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmxpYnJhcnkuaW5pdCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0IGFsbCBtb2R1bGVzIGluICQubW9kdWxlc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5pbml0TW9kdWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgbW9kdWxlIGluIHNlbGYubW9kdWxlcykge1xuXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYubW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShtb2R1bGUpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzZWxmLm1vZHVsZXNbbW9kdWxlXS5pbml0ICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUgIT09ICdtYWluJyAmJiBtb2R1bGUgIT09ICdsaWJyYXJ5Jykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1vZHVsZXNbbW9kdWxlXS5pbml0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXQgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuaW5pdExpYnJhcnkoKTtcbiAgICAgICAgICAgIHNlbGYuaW5pdE1vZHVsZXMoKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgaWYgKCEoJ21vZHVsZXMnIGluIGFwcCkpIHtcbiAgICAgICAgYXBwLm1vZHVsZXMgPSB7fTtcbiAgICB9XG5cbiAgICBhcHAubW9kdWxlcy5tYWluID0gbmV3IE1haW4oKTtcblxuICAgIGFwcC5tb2R1bGVzLm1haW4uaW5pdCgpO1xufTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBpbml0QXBwKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICBpZiAoJ21vZHVsZXMnIGluIGFwcCAmJiAnc2NoZWR1bGUnIGluIGFwcC5tb2R1bGVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFNjaGVkdWxlIGNsYXNzLlxuICAgICAqIEBjbGFzc1xuICAgICAqL1xuICAgIHZhciBTY2hlZHVsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYuYm9keSA9ICcnO1xuICAgICAgICBzZWxmLmdldFNjaGVkdWxlID0gJyc7XG4gICAgICAgIHNlbGYuZ2V0UGxhY2UgPSAnJztcbiAgICAgICAgc2VsZi5nZXRTY2hvb2wgPSAnJztcbiAgICAgICAgc2VsZi5nZXRBdXRob3IgPSAnJztcbiAgICAgICAgc2VsZi5leHBhbmQgPSAnJztcbiAgICAgICAgc2VsZi5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2NoZWR1bGUnKTtcbiAgICAgICAgc2VsZi5jb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNjaGVkdWxlTGlzdF9fY29udGVudCcpO1xuICAgICAgICBzZWxmLnRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NjaGVkdWxlSXRlbS10ZW1wbGF0ZScpLmlubmVySFRNTDtcbiAgICAgICAgc2VsZi5tb250aE5hbWVzID0gW1xuICAgICAgICAgICAgJ9GP0L3QstCw0YDRjCcsXG4gICAgICAgICAgICAn0YTQtdCy0YDQsNC70YwnLFxuICAgICAgICAgICAgJ9C80LDRgNGCJyxcbiAgICAgICAgICAgICfQsNC/0YDQtdC70YwnLFxuICAgICAgICAgICAgJ9C80LDQuScsXG4gICAgICAgICAgICAn0LjRjtC90YwnLFxuICAgICAgICAgICAgJ9C40Y7Qu9GMJyxcbiAgICAgICAgICAgICfQsNCy0LPRg9GB0YInLFxuICAgICAgICAgICAgJ9GB0LXQvdGC0Y/QsdGA0YwnLFxuICAgICAgICAgICAgJ9C+0LrRgtGP0LHRgNGMJyxcbiAgICAgICAgICAgICfQvdC+0Y/QsdGA0YwnLFxuICAgICAgICAgICAgJ9C00LXQutCw0LHRgNGMJ1xuICAgICAgICBdO1xuICAgICAgICBzZWxmLmRhdGFMaXN0ID0gJyc7XG5cblxuICAgICAgICAvLyBzZWxmLmRhdGVGcm9tSW5wdXQgPSBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiZnJvbVwiXScpO1xuICAgICAgICAvLyBzZWxmLmRhdGVUb0lucHV0ID0gc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cInRvXCJdJyk7XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5zZXR1cExpc3RlbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBzZWxmLmRhdGVGcm9tSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgc2VsZi5nZXREYXRhKTtcbiAgICAgICAgICAgIC8vIHNlbGYuZGF0ZVRvSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgc2VsZi5nZXREYXRhKTtcbiAgICAgICAgICAgIC8vIHNlbGYucGxhY2VTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgc2VsZi5nZXREYXRhKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0dXAgcGxhY2UgZmlsdGVyIHZhbHVlc1xuICAgICAgICAgKi9cbiAgICAgICAgLy8gc2VsZi5zZXR1cFBsYWNlRmlsdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vICAgICBzZWxmLmdldFBsYWNlKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAvLyAgICAgICAgIHZhciBodG1sID0gJzxvcHRpb24gdmFsdWU9XCJcIj48L29wdGlvbj4nO1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgICAgIHJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAvLyAgICAgICAgICAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiJysgaXRlbS5pZCArJ1wiPicrIGl0ZW0udGl0bGUgKyc8L29wdGlvbj4nO1xuICAgICAgICAvLyAgICAgICAgIH0pO1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgICAgIHNlbGYucGxhY2VTZWxlY3QuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgLy8gICAgIH0pO1xuICAgICAgICAvLyB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgZGF0YSBmcm9tIGxpYnJhcnkgYWNjb3JkaW5nIHRvIGZpbHRlciB2YWx1ZXNcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuZ2V0RGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gJycsLy9zZWxmLmRhdGVGcm9tSW5wdXQudmFsdWUucmVwbGFjZSgvLS9nLCAnLycpLFxuICAgICAgICAgICAgICAgIGRhdGVUbyA9ICcnLC8vc2VsZi5kYXRlVG9JbnB1dC52YWx1ZS5yZXBsYWNlKC8tL2csICcvJyksXG4gICAgICAgICAgICAgICAgcGxhY2UgPSAnJzsvL3NlbGYucGxhY2VTZWxlY3QudmFsdWUgPyBwYXJzZUludChzZWxmLnBsYWNlU2VsZWN0LnZhbHVlKSA6ICcnO1xuXG4gICAgICAgICAgICBzZWxmLmdldFNjaGVkdWxlKGRhdGVGcm9tLCBkYXRlVG8sIHBsYWNlKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5yZW5kZXIocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbmRlciBzY2hlZHVsZSBsaXN0XG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXNwb25zZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5yZW5kZXIgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcblxuICAgICAgICAgICAgY29udGVudExpc3QuY2xhc3NMaXN0LmFkZCgnc2NoZWR1bGVMaXN0X19saXN0Jyk7XG5cbiAgICAgICAgICAgIHJlc3BvbnNlLmxlY3R1cmVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2NoZWR1bGVMaXN0X19pdGVtJyk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBzZWxmLnRlbXBsYXRlO1xuXG4gICAgICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShpdGVtLmRhdGUpLFxuICAgICAgICAgICAgICAgICAgICBkYXkgPSBkYXRlLmdldERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgbW9udGggPSBzZWxmLm1vbnRoTmFtZXNbZGF0ZS5nZXRNb250aCgpXTtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnNjaGVkdWxlSXRlbV9fZGF5JykuaW5uZXJIVE1MID0gZGF5O1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2NoZWR1bGVJdGVtX19tb250aCcpLmlubmVySFRNTCA9IG1vbnRoO1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2NoZWR1bGVJdGVtX190aW1lJykuaW5uZXJIVE1MID0gaXRlbS50aW1lO1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2NoZWR1bGVJdGVtX190aXRsZScpLmlubmVySFRNTCA9IGl0ZW0udGl0bGU7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY2hlZHVsZUl0ZW1fX3BsYWNlX19saW5rJykuaW5uZXJIVE1MID0gc2VsZi5leHBhbmQoW2l0ZW0ucGxhY2VdLCB7dGl0bGU6ICdwbGFjZXMnLCBkYXRhOiByZXNwb25zZS5wbGFjZXN9KTtcblxuLy8gICAgICAgICAgICAgICAgICAgICBzY2hvb2xzID0gJycsXG4vLyAgICAgICAgICAgICAgICAgICAgIGF1dGhvcnMgPSAnJyxcbi8vXG4vL1xuLy9cbi8vXG4vL1xuLy9cbi8vXG4vL1xuLy9cbi8vXG4vLyAgICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2NoZWR1bGVJdGVtX19wbGFjZV9fbGluaycpLmhyZWYgPSBpdGVtLnBsYWNlLmxpbms7XG4vL1xuLy8gICAgICAgICAgICAgICAgIGl0ZW0uc2Nob29sLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuLy8gICAgICAgICAgICAgICAgICAgICBzY2hvb2xzICs9ICc8c3BhbiBjbGFzcz1cInNjaGVkdWxlSXRlbV9fJyArIGl0ZW0uaWQgKydcIj4nKyBpdGVtLm5hbWUgKyc8L3NwYW4+Jztcbi8vICAgICAgICAgICAgICAgICB9KTtcbi8vXG4vLyAgICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2NoZWR1bGVJdGVtX19zY2hvb2wnKS5pbm5lckhUTUwgPSBzY2hvb2xzO1xuLy9cbi8vICAgICAgICAgICAgICAgICBpdGVtLmF1dGhvci5mb3JFYWNoKGZ1bmN0aW9uKGl0ZW0pIHtcbi8vICAgICAgICAgICAgICAgICAgICAgYXV0aG9ycyArPSAnPGxpIGNsYXNzPVwic2NoZWR1bGVJdGVtX19hdXRob3JfX2l0ZW1cIj48c3BhbiBjbGFzcz1cInNjaGVkdWxlSXRlbV9fYXV0aG9yX19sYWJlbFwiPtCb0LXQutGC0L7RgDo8L3NwYW4+IDxhIGNsYXNzPVwic2NoZWR1bGVJdGVtX19hdXRob3JfX2xpbmsgbW9kYWxfdHJpZ2dlclwiIGhyZWY9XCIjYXV0aG9yXCI+JysgaXRlbS5uYW1lICsnPC9hPjwvbGk+Jztcbi8vICAgICAgICAgICAgICAgICB9KTtcbi8vXG4vLyAgICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2NoZWR1bGVJdGVtX19hdXRob3JfX2xpc3QnKS5pbm5lckhUTUwgPSBhdXRob3JzO1xuLy9cbi8vICAgICAgICAgICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKGVsZW1lbnQpO1xuXG5cblxuICAgICAgICAgICAgICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cblxuICAgICAgICAgICAgICAgIC8vIGNvbnRlbnRJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hZG1pblNjaGVkdWxlX19ib3hfX25hbWUnKS5pbm5lckhUTUwgPSBpdGVtLnRpdGxlO1xuXG4gICAgICAgICAgICAgICAgLy8gY29udGVudEl0ZW0ucXVlcnlTZWxlY3RvcignLmFkbWluU2NoZWR1bGVfX2JveF9fc2Nob29sJykuaW5uZXJIVE1MICs9IHNlbGYuZXhwYW5kKGl0ZW0uc2Nob29sLCB7dGl0bGU6ICdzY2hvb2xzJywgZGF0YTogcmVzcG9uc2Uuc2Nob29sc30pO1xuXG4gICAgICAgICAgICAgICAgLy8gY29udGVudEl0ZW0ucXVlcnlTZWxlY3RvcignLmFkbWluU2NoZWR1bGVfX2JveF9fYXV0aG9yJykuaW5uZXJIVE1MICs9IHNlbGYuZXhwYW5kKGl0ZW0uYXV0aG9yLCB7dGl0bGU6ICdhdXRob3JzJywgZGF0YTogcmVzcG9uc2UuYXV0aG9yc30pO1xuXG4gICAgICAgICAgICAgICAgLy8gY29udGVudEl0ZW0ucXVlcnlTZWxlY3RvcignLmFkbWluU2NoZWR1bGVfX2JveF9fZGF0ZScpLmlubmVySFRNTCArPSBpdGVtLmRhdGU7XG5cbiAgICAgICAgICAgICAgICAvLyBjb250ZW50SXRlbS5xdWVyeVNlbGVjdG9yKCcuYWRtaW5TY2hlZHVsZV9fYm94X190aW1lJykuaW5uZXJIVE1MICs9IGl0ZW0udGltZTtcblxuICAgICAgICAgICAgICAgIC8vIGNvbnRlbnRJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hZG1pblNjaGVkdWxlX19ib3hfX3BsYWNlJykuaW5uZXJIVE1MICs9IHNlbGYuZXhwYW5kKFtpdGVtLnBsYWNlXSwge3RpdGxlOiAncGxhY2VzJywgZGF0YTogcmVzcG9uc2UucGxhY2VzfSk7XG5cbiAgICAgICAgICAgICAgICAvLyBjb250ZW50SXRlbS5xdWVyeVNlbGVjdG9yKCcuYWRtaW5TY2hlZHVsZV9fYm94X19zdGF0dXMnKS5pbm5lckhUTUwgKz0gaXRlbS5pc092ZXIgPyAn0JvQtdC60YbQuNGPINC30LDQutC+0L3Rh9C40LvQsNGB0YwnIDogJ9Cb0LXQutGG0LjRjyDQtdGJ0LUg0L3QtSDQt9Cw0LrQvtC90YfQuNC70LDRgdGMJztcblxuICAgICAgICAgICAgICAgIC8vIGNvbnRlbnRJdGVtLnF1ZXJ5U2VsZWN0b3IoJy5hZG1pblNjaGVkdWxlX19ib3hfX3Jlc291cmNlcyBhJykuaHJlZiA9IGl0ZW0ucmVzb3VyY2VzO1xuXG4gICAgICAgICAgICAgICAgY29udGVudExpc3QuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgc2VsZi5jb250ZW50LmlubmVySFRNTCA9ICcnO1xuXG4gICAgICAgICAgICBzZWxmLmNvbnRlbnQuYXBwZW5kQ2hpbGQoY29udGVudExpc3QpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbXBvcnQgcHJvcGVydGllcyBmcm9tIE1haW4gY2xhc3NcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuaW1wb3J0RGVmYXVsdHMgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuYm9keSA9IGFwcC5tb2R1bGVzLm1haW4uYm9keTtcbiAgICAgICAgICAgIHNlbGYuZ2V0U2NoZWR1bGUgPSBhcHAubW9kdWxlcy5tYWluLmxpYnJhcnkuZ2V0U2NoZWR1bGU7XG4gICAgICAgICAgICAvLyBzZWxmLmdldFBsYWNlID0gYXBwLm1vZHVsZXMubWFpbi5saWJyYXJ5LmdldFBsYWNlO1xuICAgICAgICAgICAgLy8gc2VsZi5nZXRTY2hvb2wgPSBhcHAubW9kdWxlcy5tYWluLmxpYnJhcnkuZ2V0U2Nob29sO1xuICAgICAgICAgICAgLy8gc2VsZi5nZXRBdXRob3IgPSBhcHAubW9kdWxlcy5tYWluLmxpYnJhcnkuZ2V0QXV0aG9yO1xuICAgICAgICAgICAgc2VsZi5leHBhbmQgPSBhcHAubW9kdWxlcy5tYWluLmxpYnJhcnkuZXhwYW5kO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0IG1vZHVsZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb250YWluZXIpIHtcblxuICAgICAgICAgICAgICAgIHNlbGYuaW1wb3J0RGVmYXVsdHMoKTtcbiAgICAgICAgICAgICAgICAvLyBzZWxmLnNldHVwUGxhY2VGaWx0ZXIoKTtcbiAgICAgICAgICAgICAgICBzZWxmLmdldERhdGEoKTtcbiAgICAgICAgICAgICAgICBzZWxmLnNldHVwTGlzdGVuZXIoKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBpZiAoISgnbW9kdWxlcycgaW4gYXBwKSkge1xuICAgICAgICBhcHAubW9kdWxlcyA9IHt9O1xuICAgIH1cblxuICAgIGFwcC5tb2R1bGVzLnNjaGVkdWxlID0gbmV3IFNjaGVkdWxlKCk7XG59KSgpO1xuXG4vLyAoZnVuY3Rpb24oKSB7XG4vLyAgICAgaWYgKCdtb2R1bGVzJyBpbiBhcHAgJiYgJ3NjaGVkdWxlJyBpbiBhcHAubW9kdWxlcykge1xuLy8gICAgICAgICByZXR1cm47XG4vLyAgICAgfVxuLy9cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFNjaGVkdWxlIGNsYXNzLlxuICAgICAqIEBjbGFzc1xuICAgICAqL1xuLy8gICAgIHZhciBTY2hlZHVsZSA9IGZ1bmN0aW9uICgpIHtcbi8vICAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuLy9cbi8vICAgICAgICAgc2VsZi5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2NoZWR1bGUnKTtcbi8vICAgICAgICAgc2VsZi5lbmRQb2ludCA9ICdodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vZGltMmsyMDA2L21vc2NvdzIwMTctcHJvamVjdC0xL21hc3Rlci9zcmMvc2NoZWR1bGUuanNvbj9jYWNoZT0nICsgTWF0aC5yYW5kb20oKTtcbi8vICAgICAgICAgc2VsZi50ZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNzY2hlZHVsZUl0ZW0tdGVtcGxhdGUnKS5pbm5lckhUTUw7XG4vLyAgICAgICAgIHNlbGYuY29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY2hlZHVsZUxpc3RfX2NvbnRlbnQnKTtcbi8vICAgICAgICAgc2VsZi5tb250aE5hbWVzID0gW1xuLy8gICAgICAgICAgICAgJ9GP0L3QstCw0YDRjCcsXG4vLyAgICAgICAgICAgICAn0YTQtdCy0YDQsNC70YwnLFxuLy8gICAgICAgICAgICAgJ9C80LDRgNGCJyxcbi8vICAgICAgICAgICAgICfQsNC/0YDQtdC70YwnLFxuLy8gICAgICAgICAgICAgJ9C80LDQuScsXG4vLyAgICAgICAgICAgICAn0LjRjtC90YwnLFxuLy8gICAgICAgICAgICAgJ9C40Y7Qu9GMJyxcbi8vICAgICAgICAgICAgICfQsNCy0LPRg9GB0YInLFxuLy8gICAgICAgICAgICAgJ9GB0LXQvdGC0Y/QsdGA0YwnLFxuLy8gICAgICAgICAgICAgJ9C+0LrRgtGP0LHRgNGMJyxcbi8vICAgICAgICAgICAgICfQvdC+0Y/QsdGA0YwnLFxuLy8gICAgICAgICAgICAgJ9C00LXQutCw0LHRgNGMJ1xuLy8gICAgICAgICBdO1xuLy8gICAgICAgICBzZWxmLmRhdGFMaXN0ID0gJyc7XG4vL1xuLy8gICAgICAgICAvKipcbi8vICAgICAgICAgICogUmV0cmlldmUgZGF0YSBmb3Igc2NoZWR1bGVcbi8vICAgICAgICAgICovXG4vLyAgICAgICAgIHNlbGYuZ2V0RGF0YSA9IGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICAgICAgdmFyIHhociA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuLy9cbi8vICAgICAgICAgICAgIHhoci5vcGVuKCdHRVQnLCBzZWxmLmVuZFBvaW50LCB0cnVlKTtcbi8vXG4vLyAgICAgICAgICAgICB4aHIuc2VuZCgpO1xuLy9cbi8vICAgICAgICAgICAgIHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcbi8vICAgICAgICAgICAgICAgICBpZiAodGhpcy5yZWFkeVN0YXRlICE9PSA0KSB7XG4vLyAgICAgICAgICAgICAgICAgICAgIHJldHVyblxuLy8gICAgICAgICAgICAgICAgIH1cbi8vXG4vLyAgICAgICAgICAgICAgICAgaWYgKHRoaXMuc3RhdHVzICE9PSAyMDApIHtcbi8vICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuLy8gICAgICAgICAgICAgICAgIH1cbi8vXG4vLyAgICAgICAgICAgICAgICAgc2VsZi5kYXRhTGlzdCA9IEpTT04ucGFyc2UodGhpcy5yZXNwb25zZVRleHQpO1xuLy9cbi8vICAgICAgICAgICAgICAgICBzZWxmLnJlbmRlcihzZWxmLmRhdGFMaXN0KTtcbi8vICAgICAgICAgICAgIH07XG4vLyAgICAgICAgIH07XG4vL1xuLy8gICAgICAgICAvKipcbi8vICAgICAgICAgICogUmVuZGVyIHNjaGVkdWxlXG4vLyAgICAgICAgICAqL1xuLy8gICAgICAgICBzZWxmLnJlbmRlciA9IGZ1bmN0aW9uKGxpc3QpIHtcbi8vICAgICAgICAgICAgIHZhciBjb250ZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbi8vXG4vLyAgICAgICAgICAgICBjb250ZW50LmNsYXNzTGlzdC5hZGQoJ3NjaGVkdWxlTGlzdF9fbGlzdCcpO1xuLy9cbi8vICAgICAgICAgICAgIGxpc3QuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4vLyAgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpLFxuLy8gICAgICAgICAgICAgICAgICAgICBzY2hvb2xzID0gJycsXG4vLyAgICAgICAgICAgICAgICAgICAgIGF1dGhvcnMgPSAnJyxcbi8vICAgICAgICAgICAgICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKGl0ZW0uZGF0ZSksXG4vLyAgICAgICAgICAgICAgICAgICAgIGRheSA9IGRhdGUuZ2V0RGF0ZSgpLFxuLy8gICAgICAgICAgICAgICAgICAgICBtb250aCA9IHNlbGYubW9udGhOYW1lc1tkYXRlLmdldE1vbnRoKCldO1xuLy9cbi8vICAgICAgICAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5hZGQoJ3NjaGVkdWxlTGlzdF9faXRlbScpO1xuLy8gICAgICAgICAgICAgICAgIGVsZW1lbnQuaW5uZXJIVE1MID0gc2VsZi50ZW1wbGF0ZTtcbi8vXG4vLyAgICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2NoZWR1bGVJdGVtX19kYXknKS5pbm5lckhUTUwgPSBkYXk7XG4vLyAgICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2NoZWR1bGVJdGVtX19tb250aCcpLmlubmVySFRNTCA9IG1vbnRoO1xuLy8gICAgICAgICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnNjaGVkdWxlSXRlbV9fdGltZScpLmlubmVySFRNTCA9IGl0ZW0udGltZTtcbi8vICAgICAgICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY2hlZHVsZUl0ZW1fX3RpdGxlJykuaW5uZXJIVE1MID0gaXRlbS50aXRsZTtcbi8vICAgICAgICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY2hlZHVsZUl0ZW1fX3BsYWNlX19saW5rJykuaW5uZXJIVE1MID0gaXRlbS5wbGFjZS50aXRsZTtcbi8vICAgICAgICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY2hlZHVsZUl0ZW1fX3BsYWNlX19saW5rJykuaHJlZiA9IGl0ZW0ucGxhY2UubGluaztcbi8vXG4vLyAgICAgICAgICAgICAgICAgaXRlbS5zY2hvb2wuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4vLyAgICAgICAgICAgICAgICAgICAgIHNjaG9vbHMgKz0gJzxzcGFuIGNsYXNzPVwic2NoZWR1bGVJdGVtX18nICsgaXRlbS5pZCArJ1wiPicrIGl0ZW0ubmFtZSArJzwvc3Bhbj4nO1xuLy8gICAgICAgICAgICAgICAgIH0pO1xuLy9cbi8vICAgICAgICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY2hlZHVsZUl0ZW1fX3NjaG9vbCcpLmlubmVySFRNTCA9IHNjaG9vbHM7XG4vL1xuLy8gICAgICAgICAgICAgICAgIGl0ZW0uYXV0aG9yLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuLy8gICAgICAgICAgICAgICAgICAgICBhdXRob3JzICs9ICc8bGkgY2xhc3M9XCJzY2hlZHVsZUl0ZW1fX2F1dGhvcl9faXRlbVwiPjxzcGFuIGNsYXNzPVwic2NoZWR1bGVJdGVtX19hdXRob3JfX2xhYmVsXCI+0JvQtdC60YLQvtGAOjwvc3Bhbj4gPGEgY2xhc3M9XCJzY2hlZHVsZUl0ZW1fX2F1dGhvcl9fbGluayBtb2RhbF90cmlnZ2VyXCIgaHJlZj1cIiNhdXRob3JcIj4nKyBpdGVtLm5hbWUgKyc8L2E+PC9saT4nO1xuLy8gICAgICAgICAgICAgICAgIH0pO1xuLy9cbi8vICAgICAgICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY2hlZHVsZUl0ZW1fX2F1dGhvcl9fbGlzdCcpLmlubmVySFRNTCA9IGF1dGhvcnM7XG4vL1xuLy8gICAgICAgICAgICAgICAgIGNvbnRlbnQuYXBwZW5kQ2hpbGQoZWxlbWVudCk7XG4vLyAgICAgICAgICAgICB9KTtcbi8vXG4vLyAgICAgICAgICAgICBzZWxmLmNvbnRlbnQuYXBwZW5kQ2hpbGQoY29udGVudCk7XG4vLyAgICAgICAgIH07XG4vL1xuLy8gICAgICAgICAvKipcbi8vICAgICAgICAgICogSW1wb3J0IHByb3BlcnRpZXMgZnJvbSBNYWluIGNsYXNzXG4vLyAgICAgICAgICAqL1xuLy8gICAgICAgICBzZWxmLmltcG9ydERlZmF1bHRzID0gZnVuY3Rpb24oKSB7XG4vLyAgICAgICAgICAgICBzZWxmLmJvZHkgPSBhcHAubW9kdWxlcy5tYWluLmJvZHk7XG4vLyAgICAgICAgIH07XG4vL1xuLy8gICAgICAgICAvKipcbi8vICAgICAgICAgICogSW5pdCBtb2R1bGVcbi8vICAgICAgICAgICovXG4vLyAgICAgICAgIHNlbGYuaW5pdCA9IGZ1bmN0aW9uKCkge1xuLy8gICAgICAgICAgICAgaWYgKHNlbGYuY29udGFpbmVyKSB7XG4vL1xuLy8gICAgICAgICAgICAgICAgIHNlbGYuaW1wb3J0RGVmYXVsdHMoKTtcbi8vICAgICAgICAgICAgICAgICBzZWxmLmdldERhdGEoKTtcbi8vXG4vLyAgICAgICAgICAgICB9XG4vLyAgICAgICAgIH07XG4vLyAgICAgfTtcbi8vXG4vLyAgICAgaWYgKCEoJ21vZHVsZXMnIGluIGFwcCkpIHtcbi8vICAgICAgICAgYXBwLm1vZHVsZXMgPSB7fTtcbi8vICAgICB9XG4vL1xuLy8gICAgIGFwcC5tb2R1bGVzLnNjaGVkdWxlID0gbmV3IFNjaGVkdWxlKCk7XG4vLyB9KSgpO1xuLy9cbi8vXG4iXX0=

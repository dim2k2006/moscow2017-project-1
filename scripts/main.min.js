!function(){if(!("modules"in app&&"modal"in app.modules)){var e=function(){var e=this;e.html="",e.body="",e.container=document.querySelector(".modal"),e.openButton=document.querySelector(".modal_trigger"),e.closeButton=document.querySelector(".modal_close"),e.setupListener=function(){e.body.addEventListener("click",e.router)},e.router=function(t){var n=t.target;n.classList.contains("modal_trigger")?(t.preventDefault(),e.open(t.target)):n.classList.contains("modal_close")&&(t.preventDefault(),e.close(t.target))},e.open=function(t){var n=t.getAttribute("href"),a=document.querySelector(n),o=t.dataset.photo,l=t.dataset.title,i=t.dataset.description;a.querySelector(".authorInfo__preview img").src=o,a.querySelector(".authorInfo__title").innerHTML=l,a.querySelector(".authorInfo__text p").innerHTML=i,e.html.classList.add("modal_state_open"),a.classList.add("modal_state_open")},e.close=function(t){var n=t.closest(".modal");n.classList.remove("modal_state_open"),e.html.classList.remove("modal_state_open")},e.importDefaults=function(){e.html=app.modules.main.html,e.body=app.modules.main.body},e.init=function(){e.container&&(e.importDefaults(),e.setupListener())}};"modules"in app||(app.modules={}),app.modules.modal=new e}}();var initApp=function(){if(!("modules"in app&&"main"in app.modules)){var e=function(){var e=this;e.html=document.querySelector("html"),e.body=document.querySelector("body"),e.modules=app.modules,e.library=new Library,e.initLibrary=function(){e.library.init()},e.initModules=function(){for(var t in e.modules)e.modules.hasOwnProperty(t)&&"undefined"!=typeof e.modules[t].init&&"main"!==t&&"library"!==t&&e.modules[t].init()},e.init=function(){e.initLibrary(),e.initModules()}};"modules"in app||(app.modules={}),app.modules.main=new e,app.modules.main.init()}};window.addEventListener("load",initApp),function(){if(!("modules"in app&&"schedule"in app.modules)){var e=function(){var e=this;e.body="",e.getSchedule="",e.getPlace="",e.getSchool="",e.getAuthor="",e.expand="",e.container=document.querySelector(".schedule"),e.content=document.querySelector(".scheduleList__content"),e.template=document.querySelector("#scheduleItem-template").innerHTML,e.monthNames=["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],e.dataList="",e.setupListener=function(){},e.getData=function(){var t="",n="",a="";e.getSchedule(t,n,a).then(function(t){e.render(t)})},e.render=function(t){var n=document.createElement("ul");n.classList.add("scheduleList__list"),t.lectures.forEach(function(a){var o=document.createElement("li");o.classList.add("scheduleList__item"),o.innerHTML=e.template;var l=new Date(a.date),i=l.getDate(),r=e.monthNames[l.getMonth()],s=[],u=[];a.school.forEach(function(n){var a=e.expand([n],{title:"schools",data:t.schools},"title"),o=e.expand([n],{title:"schools",data:t.schools},"id");s.push('<span class="scheduleItem__school__item scheduleItem__school__item_'+o+'">'+a+"</span>")}),a.author.forEach(function(n){var a=e.expand([n],{title:"authors",data:t.authors},"title"),o=e.expand([n],{title:"authors",data:t.authors},"photo"),l=e.expand([n],{title:"authors",data:t.authors},"description");u.push('<a class="scheduleItem__author__link modal_trigger" href="#author" title="Посмотреть дополнительную информацию" data-photo="'+o+'" data-title="'+a+'" data-description="'+l+'">'+a+"</a>")}),o.querySelector(".scheduleItem__day").innerHTML=i,o.querySelector(".scheduleItem__month").innerHTML=r,o.querySelector(".scheduleItem__time").innerHTML=a.time,o.querySelector(".scheduleItem__title").innerHTML=a.title,o.querySelector(".scheduleItem__school").innerHTML=s.join(""),o.querySelector(".scheduleItem__author").innerHTML+=u.join(", "),o.querySelector(".scheduleItem__audience").innerHTML+=e.expand([a.place],{title:"places",data:t.places},"title"),o.querySelector(".scheduleItem__place__link").innerHTML=e.expand([a.place],{title:"places",data:t.places},"address"),o.querySelector(".scheduleItem__place__link").href=e.expand([a.place],{title:"places",data:t.places},"link"),n.appendChild(o)}),e.content.innerHTML="",e.content.appendChild(n)},e.importDefaults=function(){e.body=app.modules.main.body,e.getSchedule=app.modules.main.library.getSchedule,e.expand=app.modules.main.library.expand},e.init=function(){e.container&&(e.importDefaults(),e.getData(),e.setupListener())}};"modules"in app||(app.modules={}),app.modules.schedule=new e}}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1vZGFsL21vZGFsLmpzIiwibWFpbi9tYWluLmpzIiwic2NoZWR1bGUvc2NoZWR1bGUuanMiXSwibmFtZXMiOlsiYXBwIiwibW9kdWxlcyIsIk1vZGFsIiwic2VsZiIsInRoaXMiLCJodG1sIiwiYm9keSIsImNvbnRhaW5lciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsIm9wZW5CdXR0b24iLCJjbG9zZUJ1dHRvbiIsInNldHVwTGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwicm91dGVyIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJjb250YWlucyIsInByZXZlbnREZWZhdWx0Iiwib3BlbiIsImNsb3NlIiwic3JjIiwiZ2V0QXR0cmlidXRlIiwicGhvdG8iLCJkYXRhc2V0IiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImlubmVySFRNTCIsImFkZCIsImNsb3Nlc3QiLCJyZW1vdmUiLCJpbXBvcnREZWZhdWx0cyIsIm1haW4iLCJpbml0IiwibW9kYWwiLCJpbml0QXBwIiwiTWFpbiIsImxpYnJhcnkiLCJMaWJyYXJ5IiwiaW5pdExpYnJhcnkiLCJpbml0TW9kdWxlcyIsIm1vZHVsZSIsImhhc093blByb3BlcnR5Iiwid2luZG93IiwiU2NoZWR1bGUiLCJnZXRTY2hlZHVsZSIsImdldFBsYWNlIiwiZ2V0U2Nob29sIiwiZ2V0QXV0aG9yIiwiZXhwYW5kIiwiY29udGVudCIsInRlbXBsYXRlIiwibW9udGhOYW1lcyIsImRhdGFMaXN0IiwiZ2V0RGF0YSIsImRhdGVGcm9tIiwiZGF0ZVRvIiwicGxhY2UiLCJ0aGVuIiwicmVzcG9uc2UiLCJyZW5kZXIiLCJjb250ZW50TGlzdCIsImNyZWF0ZUVsZW1lbnQiLCJsZWN0dXJlcyIsImZvckVhY2giLCJpdGVtIiwiZWxlbWVudCIsImRhdGUiLCJEYXRlIiwiZGF5IiwiZ2V0RGF0ZSIsIm1vbnRoIiwiZ2V0TW9udGgiLCJzY2hvb2wiLCJhdXRob3IiLCJpdGVtVGl0bGUiLCJkYXRhIiwic2Nob29scyIsIml0ZW1JZCIsInB1c2giLCJhdXRob3JzIiwiaXRlbVBob3RvIiwiaXRlbURlc2NyaXB0aW9uIiwidGltZSIsImpvaW4iLCJwbGFjZXMiLCJocmVmIiwiYXBwZW5kQ2hpbGQiLCJzY2hlZHVsZSJdLCJtYXBwaW5ncyI6IkNBQUEsV0FDQSxLQUFBLFdBQUFBLE1BQUEsU0FBQUEsS0FBQUMsU0FBQSxDQVFBLEdBQUFDLEdBQUEsV0FDQSxHQUFBQyxHQUFBQyxJQUVBRCxHQUFBRSxLQUFBLEdBQ0FGLEVBQUFHLEtBQUEsR0FDQUgsRUFBQUksVUFBQUMsU0FBQUMsY0FBQSxVQUNBTixFQUFBTyxXQUFBRixTQUFBQyxjQUFBLGtCQUNBTixFQUFBUSxZQUFBSCxTQUFBQyxjQUFBLGdCQUtBTixFQUFBUyxjQUFBLFdBQ0FULEVBQUFHLEtBQUFPLGlCQUFBLFFBQUFWLEVBQUFXLFNBT0FYLEVBQUFXLE9BQUEsU0FBQUMsR0FDQSxHQUFBQyxHQUFBRCxFQUFBQyxNQUVBQSxHQUFBQyxVQUFBQyxTQUFBLGtCQUVBSCxFQUFBSSxpQkFFQWhCLEVBQUFpQixLQUFBTCxFQUFBQyxTQUVBQSxFQUFBQyxVQUFBQyxTQUFBLGlCQUVBSCxFQUFBSSxpQkFFQWhCLEVBQUFrQixNQUFBTixFQUFBQyxVQUtBYixFQUFBaUIsS0FBQSxTQUFBSixHQUNBLEdBQUFNLEdBQUFOLEVBQUFPLGFBQUEsUUFDQWhCLEVBQUFDLFNBQUFDLGNBQUFhLEdBQ0FFLEVBQUFSLEVBQUFTLFFBQUFELE1BQ0FFLEVBQUFWLEVBQUFTLFFBQUFDLE1BQ0FDLEVBQUFYLEVBQUFTLFFBQUFFLFdBRUFwQixHQUFBRSxjQUFBLDRCQUFBYSxJQUFBRSxFQUVBakIsRUFBQUUsY0FBQSxzQkFBQW1CLFVBQUFGLEVBRUFuQixFQUFBRSxjQUFBLHVCQUFBbUIsVUFBQUQsRUFFQXhCLEVBQUFFLEtBQUFZLFVBQUFZLElBQUEsb0JBQ0F0QixFQUFBVSxVQUFBWSxJQUFBLHFCQUdBMUIsRUFBQWtCLE1BQUEsU0FBQUwsR0FDQSxHQUFBVCxHQUFBUyxFQUFBYyxR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RCxRQUFBcUMsWUFBQTFCLElBTUEzRCxFQUFBNkIsZUFBQSxXQUNBN0IsRUFBQUcsS0FBQU4sSUFBQUMsUUFBQWdDLEtBQUEzQixLQUNBSCxFQUFBMkMsWUFBQTlDLElBQUFDLFFBQUFnQyxLQUFBSyxRQUFBUSxZQUlBM0MsRUFBQStDLE9BQUFsRCxJQUFBQyxRQUFBZ0MsS0FBQUssUUFBQVksUUFNQS9DLEVBQUErQixLQUFBLFdBQ0EvQixFQUFBSSxZQUVBSixFQUFBNkIsaUJBRUE3QixFQUFBb0QsVUFDQXBELEVBQUFTLGtCQU1BLFlBQUFaLE9BQ0FBLElBQUFDLFlBR0FELElBQUFDLFFBQUF3RixTQUFBLEdBQUE1QyIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCdtb2R1bGVzJyBpbiBhcHAgJiYgJ21vZGFsJyBpbiBhcHAubW9kdWxlcykge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQ3JlYXRlcyBhIG5ldyBNb2RhbCBjbGFzcy5cbiAgICAgKiBAY2xhc3NcbiAgICAgKi9cbiAgICB2YXIgTW9kYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzZWxmID0gdGhpcztcblxuICAgICAgICBzZWxmLmh0bWwgPSAnJztcbiAgICAgICAgc2VsZi5ib2R5ID0gJyc7XG4gICAgICAgIHNlbGYuY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsJyk7XG4gICAgICAgIHNlbGYub3BlbkJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbF90cmlnZ2VyJyk7XG4gICAgICAgIHNlbGYuY2xvc2VCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWxfY2xvc2UnKTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5zZXR1cExpc3RlbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZWxmLnJvdXRlcik7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJvdXRlIGNsaWNrIGV2ZW50XG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBldmVudFxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5yb3V0ZXIgPSBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgdmFyIHRhcmdldCA9IGV2ZW50LnRhcmdldDtcblxuICAgICAgICAgICAgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsX3RyaWdnZXInKSkge1xuXG4gICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgIHNlbGYub3BlbihldmVudC50YXJnZXQpO1xuXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZGFsX2Nsb3NlJykpIHtcblxuICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICBzZWxmLmNsb3NlKGV2ZW50LnRhcmdldCk7XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBzZWxmLm9wZW4gPSBmdW5jdGlvbih0YXJnZXQpIHtcbiAgICAgICAgICAgIHZhciBzcmMgPSB0YXJnZXQuZ2V0QXR0cmlidXRlKCdocmVmJyksXG4gICAgICAgICAgICAgICAgY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihzcmMpLFxuICAgICAgICAgICAgICAgIHBob3RvID0gdGFyZ2V0LmRhdGFzZXQucGhvdG8sXG4gICAgICAgICAgICAgICAgdGl0bGUgPSB0YXJnZXQuZGF0YXNldC50aXRsZSxcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbiA9IHRhcmdldC5kYXRhc2V0LmRlc2NyaXB0aW9uO1xuXG4gICAgICAgICAgICBjb250YWluZXIucXVlcnlTZWxlY3RvcignLmF1dGhvckluZm9fX3ByZXZpZXcgaW1nJykuc3JjID0gcGhvdG87XG5cbiAgICAgICAgICAgIGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuYXV0aG9ySW5mb19fdGl0bGUnKS5pbm5lckhUTUwgPSB0aXRsZTtcblxuICAgICAgICAgICAgY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5hdXRob3JJbmZvX190ZXh0IHAnKS5pbm5lckhUTUwgPSBkZXNjcmlwdGlvbjtcblxuICAgICAgICAgICAgc2VsZi5odG1sLmNsYXNzTGlzdC5hZGQoJ21vZGFsX3N0YXRlX29wZW4nKTtcbiAgICAgICAgICAgIGNvbnRhaW5lci5jbGFzc0xpc3QuYWRkKCdtb2RhbF9zdGF0ZV9vcGVuJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgc2VsZi5jbG9zZSA9IGZ1bmN0aW9uKHRhcmdldCkge1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHRhcmdldC5jbG9zZXN0KCcubW9kYWwnKTtcblxuICAgICAgICAgICAgY29udGFpbmVyLmNsYXNzTGlzdC5yZW1vdmUoJ21vZGFsX3N0YXRlX29wZW4nKTtcbiAgICAgICAgICAgIHNlbGYuaHRtbC5jbGFzc0xpc3QucmVtb3ZlKCdtb2RhbF9zdGF0ZV9vcGVuJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEltcG9ydCBwcm9wZXJ0aWVzIGZyb20gTWFpbiBjbGFzc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5pbXBvcnREZWZhdWx0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5odG1sID0gYXBwLm1vZHVsZXMubWFpbi5odG1sO1xuICAgICAgICAgICAgc2VsZi5ib2R5ID0gYXBwLm1vZHVsZXMubWFpbi5ib2R5O1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0IG1vZHVsZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5pbml0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBpZiAoc2VsZi5jb250YWluZXIpIHtcblxuICAgICAgICAgICAgICAgIHNlbGYuaW1wb3J0RGVmYXVsdHMoKTtcbiAgICAgICAgICAgICAgICBzZWxmLnNldHVwTGlzdGVuZXIoKTtcblxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBpZiAoISgnbW9kdWxlcycgaW4gYXBwKSkge1xuICAgICAgICBhcHAubW9kdWxlcyA9IHt9O1xuICAgIH1cblxuICAgIGFwcC5tb2R1bGVzLm1vZGFsID0gbmV3IE1vZGFsKCk7XG59KSgpO1xuIiwidmFyIGluaXRBcHAgPSBmdW5jdGlvbigpIHtcbiAgICBpZiAoJ21vZHVsZXMnIGluIGFwcCAmJiAnbWFpbicgaW4gYXBwLm1vZHVsZXMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIENyZWF0ZXMgYSBuZXcgTWFpbiBjbGFzcy5cbiAgICAgKiBAY2xhc3NcbiAgICAgKi9cbiAgICB2YXIgTWFpbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgc2VsZi5odG1sID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignaHRtbCcpO1xuICAgICAgICBzZWxmLmJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdib2R5Jyk7XG4gICAgICAgIHNlbGYubW9kdWxlcyA9IGFwcC5tb2R1bGVzO1xuICAgICAgICBzZWxmLmxpYnJhcnkgPSBuZXcgTGlicmFyeSgpO1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0IGxpYnJhcnkgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmluaXRMaWJyYXJ5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBzZWxmLmxpYnJhcnkuaW5pdCgpO1xuICAgICAgICB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBJbml0IGFsbCBtb2R1bGVzIGluICQubW9kdWxlc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5pbml0TW9kdWxlcyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZm9yICh2YXIgbW9kdWxlIGluIHNlbGYubW9kdWxlcykge1xuXG4gICAgICAgICAgICAgICAgaWYgKHNlbGYubW9kdWxlcy5oYXNPd25Qcm9wZXJ0eShtb2R1bGUpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBzZWxmLm1vZHVsZXNbbW9kdWxlXS5pbml0ICE9PSAndW5kZWZpbmVkJyAmJiBtb2R1bGUgIT09ICdtYWluJyAmJiBtb2R1bGUgIT09ICdsaWJyYXJ5Jykge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWxmLm1vZHVsZXNbbW9kdWxlXS5pbml0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXQgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHNlbGYuaW5pdExpYnJhcnkoKTtcbiAgICAgICAgICAgIHNlbGYuaW5pdE1vZHVsZXMoKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG4gICAgaWYgKCEoJ21vZHVsZXMnIGluIGFwcCkpIHtcbiAgICAgICAgYXBwLm1vZHVsZXMgPSB7fTtcbiAgICB9XG5cbiAgICBhcHAubW9kdWxlcy5tYWluID0gbmV3IE1haW4oKTtcblxuICAgIGFwcC5tb2R1bGVzLm1haW4uaW5pdCgpO1xufTtcblxud2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCBpbml0QXBwKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICBpZiAoJ21vZHVsZXMnIGluIGFwcCAmJiAnc2NoZWR1bGUnIGluIGFwcC5tb2R1bGVzKSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBDcmVhdGVzIGEgbmV3IFNjaGVkdWxlIGNsYXNzLlxuICAgICAqIEBjbGFzc1xuICAgICAqL1xuICAgIHZhciBTY2hlZHVsZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIHNlbGYuYm9keSA9ICcnO1xuICAgICAgICBzZWxmLmdldFNjaGVkdWxlID0gJyc7XG4gICAgICAgIHNlbGYuZ2V0UGxhY2UgPSAnJztcbiAgICAgICAgc2VsZi5nZXRTY2hvb2wgPSAnJztcbiAgICAgICAgc2VsZi5nZXRBdXRob3IgPSAnJztcbiAgICAgICAgc2VsZi5leHBhbmQgPSAnJztcbiAgICAgICAgc2VsZi5jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuc2NoZWR1bGUnKTtcbiAgICAgICAgc2VsZi5jb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnNjaGVkdWxlTGlzdF9fY29udGVudCcpO1xuICAgICAgICBzZWxmLnRlbXBsYXRlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI3NjaGVkdWxlSXRlbS10ZW1wbGF0ZScpLmlubmVySFRNTDtcbiAgICAgICAgc2VsZi5tb250aE5hbWVzID0gW1xuICAgICAgICAgICAgJ9GP0L3QstCw0YDRjCcsXG4gICAgICAgICAgICAn0YTQtdCy0YDQsNC70YwnLFxuICAgICAgICAgICAgJ9C80LDRgNGCJyxcbiAgICAgICAgICAgICfQsNC/0YDQtdC70YwnLFxuICAgICAgICAgICAgJ9C80LDQuScsXG4gICAgICAgICAgICAn0LjRjtC90YwnLFxuICAgICAgICAgICAgJ9C40Y7Qu9GMJyxcbiAgICAgICAgICAgICfQsNCy0LPRg9GB0YInLFxuICAgICAgICAgICAgJ9GB0LXQvdGC0Y/QsdGA0YwnLFxuICAgICAgICAgICAgJ9C+0LrRgtGP0LHRgNGMJyxcbiAgICAgICAgICAgICfQvdC+0Y/QsdGA0YwnLFxuICAgICAgICAgICAgJ9C00LXQutCw0LHRgNGMJ1xuICAgICAgICBdO1xuICAgICAgICBzZWxmLmRhdGFMaXN0ID0gJyc7XG5cblxuICAgICAgICAvLyBzZWxmLmRhdGVGcm9tSW5wdXQgPSBzZWxmLmNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcuZm9ybUlucHV0X19pbnB1dFtuYW1lPVwiZnJvbVwiXScpO1xuICAgICAgICAvLyBzZWxmLmRhdGVUb0lucHV0ID0gc2VsZi5jb250YWluZXIucXVlcnlTZWxlY3RvcignLmZvcm1JbnB1dF9faW5wdXRbbmFtZT1cInRvXCJdJyk7XG5cblxuICAgICAgICAvKipcbiAgICAgICAgICogQWRkIGV2ZW50IGxpc3RlbmVyc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5zZXR1cExpc3RlbmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAvLyBzZWxmLmRhdGVGcm9tSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgc2VsZi5nZXREYXRhKTtcbiAgICAgICAgICAgIC8vIHNlbGYuZGF0ZVRvSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgc2VsZi5nZXREYXRhKTtcbiAgICAgICAgICAgIC8vIHNlbGYucGxhY2VTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgc2VsZi5nZXREYXRhKTtcbiAgICAgICAgfTtcblxuICAgICAgICAvKipcbiAgICAgICAgICogU2V0dXAgcGxhY2UgZmlsdGVyIHZhbHVlc1xuICAgICAgICAgKi9cbiAgICAgICAgLy8gc2VsZi5zZXR1cFBsYWNlRmlsdGVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vICAgICBzZWxmLmdldFBsYWNlKCkudGhlbihmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAvLyAgICAgICAgIHZhciBodG1sID0gJzxvcHRpb24gdmFsdWU9XCJcIj48L29wdGlvbj4nO1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgICAgIHJlc3BvbnNlLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAvLyAgICAgICAgICAgICBodG1sICs9ICc8b3B0aW9uIHZhbHVlPVwiJysgaXRlbS5pZCArJ1wiPicrIGl0ZW0udGl0bGUgKyc8L29wdGlvbj4nO1xuICAgICAgICAvLyAgICAgICAgIH0pO1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgICAgIHNlbGYucGxhY2VTZWxlY3QuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgLy8gICAgIH0pO1xuICAgICAgICAvLyB9O1xuXG4gICAgICAgIC8qKlxuICAgICAgICAgKiBHZXQgZGF0YSBmcm9tIGxpYnJhcnkgYWNjb3JkaW5nIHRvIGZpbHRlciB2YWx1ZXNcbiAgICAgICAgICovXG4gICAgICAgIHNlbGYuZ2V0RGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGRhdGVGcm9tID0gJycsLy9zZWxmLmRhdGVGcm9tSW5wdXQudmFsdWUucmVwbGFjZSgvLS9nLCAnLycpLFxuICAgICAgICAgICAgICAgIGRhdGVUbyA9ICcnLC8vc2VsZi5kYXRlVG9JbnB1dC52YWx1ZS5yZXBsYWNlKC8tL2csICcvJyksXG4gICAgICAgICAgICAgICAgcGxhY2UgPSAnJzsvL3NlbGYucGxhY2VTZWxlY3QudmFsdWUgPyBwYXJzZUludChzZWxmLnBsYWNlU2VsZWN0LnZhbHVlKSA6ICcnO1xuXG4gICAgICAgICAgICBzZWxmLmdldFNjaGVkdWxlKGRhdGVGcm9tLCBkYXRlVG8sIHBsYWNlKS50aGVuKGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgc2VsZi5yZW5kZXIocmVzcG9uc2UpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIFJlbmRlciBzY2hlZHVsZSBsaXN0XG4gICAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSByZXNwb25zZVxuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5yZW5kZXIgPSBmdW5jdGlvbihyZXNwb25zZSkge1xuICAgICAgICAgICAgdmFyIGNvbnRlbnRMaXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcblxuICAgICAgICAgICAgY29udGVudExpc3QuY2xhc3NMaXN0LmFkZCgnc2NoZWR1bGVMaXN0X19saXN0Jyk7XG5cbiAgICAgICAgICAgIHJlc3BvbnNlLmxlY3R1cmVzLmZvckVhY2goZnVuY3Rpb24oaXRlbSkge1xuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnc2NoZWR1bGVMaXN0X19pdGVtJyk7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5pbm5lckhUTUwgPSBzZWxmLnRlbXBsYXRlO1xuXG4gICAgICAgICAgICAgICAgdmFyIGRhdGUgPSBuZXcgRGF0ZShpdGVtLmRhdGUpLFxuICAgICAgICAgICAgICAgICAgICBkYXkgPSBkYXRlLmdldERhdGUoKSxcbiAgICAgICAgICAgICAgICAgICAgbW9udGggPSBzZWxmLm1vbnRoTmFtZXNbZGF0ZS5nZXRNb250aCgpXSxcbiAgICAgICAgICAgICAgICAgICAgc2Nob29sID0gW10sXG4gICAgICAgICAgICAgICAgICAgIGF1dGhvciA9IFtdO1xuXG4gICAgICAgICAgICAgICAgaXRlbS5zY2hvb2wuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtVGl0bGUgPSBzZWxmLmV4cGFuZChbaXRlbV0sIHt0aXRsZTogJ3NjaG9vbHMnLCBkYXRhOiByZXNwb25zZS5zY2hvb2xzfSwgJ3RpdGxlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtSWQgPSBzZWxmLmV4cGFuZChbaXRlbV0sIHt0aXRsZTogJ3NjaG9vbHMnLCBkYXRhOiByZXNwb25zZS5zY2hvb2xzfSwgJ2lkJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgc2Nob29sLnB1c2goJzxzcGFuIGNsYXNzPVwic2NoZWR1bGVJdGVtX19zY2hvb2xfX2l0ZW0gc2NoZWR1bGVJdGVtX19zY2hvb2xfX2l0ZW1fJysgaXRlbUlkICsnXCI+JysgaXRlbVRpdGxlICsnPC9zcGFuPicpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgaXRlbS5hdXRob3IuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBpdGVtVGl0bGUgPSBzZWxmLmV4cGFuZChbaXRlbV0sIHt0aXRsZTogJ2F1dGhvcnMnLCBkYXRhOiByZXNwb25zZS5hdXRob3JzfSwgJ3RpdGxlJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtUGhvdG8gPSBzZWxmLmV4cGFuZChbaXRlbV0sIHt0aXRsZTogJ2F1dGhvcnMnLCBkYXRhOiByZXNwb25zZS5hdXRob3JzfSwgJ3Bob3RvJyksXG4gICAgICAgICAgICAgICAgICAgICAgICBpdGVtRGVzY3JpcHRpb24gPSBzZWxmLmV4cGFuZChbaXRlbV0sIHt0aXRsZTogJ2F1dGhvcnMnLCBkYXRhOiByZXNwb25zZS5hdXRob3JzfSwgJ2Rlc2NyaXB0aW9uJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgYXV0aG9yLnB1c2goJzxhIGNsYXNzPVwic2NoZWR1bGVJdGVtX19hdXRob3JfX2xpbmsgbW9kYWxfdHJpZ2dlclwiIGhyZWY9XCIjYXV0aG9yXCIgdGl0bGU9XCLQn9C+0YHQvNC+0YLRgNC10YLRjCDQtNC+0L/QvtC70L3QuNGC0LXQu9GM0L3Rg9GOINC40L3RhNC+0YDQvNCw0YbQuNGOXCIgZGF0YS1waG90bz1cIicrIGl0ZW1QaG90byArJ1wiIGRhdGEtdGl0bGU9XCInKyBpdGVtVGl0bGUgKydcIiBkYXRhLWRlc2NyaXB0aW9uPVwiJysgaXRlbURlc2NyaXB0aW9uICsnXCI+JysgaXRlbVRpdGxlICsnPC9hPicpO1xuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2NoZWR1bGVJdGVtX19kYXknKS5pbm5lckhUTUwgPSBkYXk7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY2hlZHVsZUl0ZW1fX21vbnRoJykuaW5uZXJIVE1MID0gbW9udGg7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY2hlZHVsZUl0ZW1fX3RpbWUnKS5pbm5lckhUTUwgPSBpdGVtLnRpbWU7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY2hlZHVsZUl0ZW1fX3RpdGxlJykuaW5uZXJIVE1MID0gaXRlbS50aXRsZTtcblxuICAgICAgICAgICAgICAgIGVsZW1lbnQucXVlcnlTZWxlY3RvcignLnNjaGVkdWxlSXRlbV9fc2Nob29sJykuaW5uZXJIVE1MID0gc2Nob29sLmpvaW4oJycpO1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2NoZWR1bGVJdGVtX19hdXRob3InKS5pbm5lckhUTUwgKz0gYXV0aG9yLmpvaW4oJywgJyk7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY2hlZHVsZUl0ZW1fX2F1ZGllbmNlJykuaW5uZXJIVE1MICs9IHNlbGYuZXhwYW5kKFtpdGVtLnBsYWNlXSwge3RpdGxlOiAncGxhY2VzJywgZGF0YTogcmVzcG9uc2UucGxhY2VzfSwgJ3RpdGxlJyk7XG5cbiAgICAgICAgICAgICAgICBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJy5zY2hlZHVsZUl0ZW1fX3BsYWNlX19saW5rJykuaW5uZXJIVE1MID0gc2VsZi5leHBhbmQoW2l0ZW0ucGxhY2VdLCB7dGl0bGU6ICdwbGFjZXMnLCBkYXRhOiByZXNwb25zZS5wbGFjZXN9LCAnYWRkcmVzcycpO1xuXG4gICAgICAgICAgICAgICAgZWxlbWVudC5xdWVyeVNlbGVjdG9yKCcuc2NoZWR1bGVJdGVtX19wbGFjZV9fbGluaycpLmhyZWYgPSBzZWxmLmV4cGFuZChbaXRlbS5wbGFjZV0sIHt0aXRsZTogJ3BsYWNlcycsIGRhdGE6IHJlc3BvbnNlLnBsYWNlc30sICdsaW5rJyk7XG5cbiAgICAgICAgICAgICAgICBjb250ZW50TGlzdC5hcHBlbmRDaGlsZChlbGVtZW50KTtcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICBzZWxmLmNvbnRlbnQuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgICAgIHNlbGYuY29udGVudC5hcHBlbmRDaGlsZChjb250ZW50TGlzdCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEltcG9ydCBwcm9wZXJ0aWVzIGZyb20gTWFpbiBjbGFzc1xuICAgICAgICAgKi9cbiAgICAgICAgc2VsZi5pbXBvcnREZWZhdWx0cyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgc2VsZi5ib2R5ID0gYXBwLm1vZHVsZXMubWFpbi5ib2R5O1xuICAgICAgICAgICAgc2VsZi5nZXRTY2hlZHVsZSA9IGFwcC5tb2R1bGVzLm1haW4ubGlicmFyeS5nZXRTY2hlZHVsZTtcbiAgICAgICAgICAgIC8vIHNlbGYuZ2V0UGxhY2UgPSBhcHAubW9kdWxlcy5tYWluLmxpYnJhcnkuZ2V0UGxhY2U7XG4gICAgICAgICAgICAvLyBzZWxmLmdldFNjaG9vbCA9IGFwcC5tb2R1bGVzLm1haW4ubGlicmFyeS5nZXRTY2hvb2w7XG4gICAgICAgICAgICAvLyBzZWxmLmdldEF1dGhvciA9IGFwcC5tb2R1bGVzLm1haW4ubGlicmFyeS5nZXRBdXRob3I7XG4gICAgICAgICAgICBzZWxmLmV4cGFuZCA9IGFwcC5tb2R1bGVzLm1haW4ubGlicmFyeS5leHBhbmQ7XG4gICAgICAgIH07XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIEluaXQgbW9kdWxlXG4gICAgICAgICAqL1xuICAgICAgICBzZWxmLmluaXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChzZWxmLmNvbnRhaW5lcikge1xuXG4gICAgICAgICAgICAgICAgc2VsZi5pbXBvcnREZWZhdWx0cygpO1xuICAgICAgICAgICAgICAgIC8vIHNlbGYuc2V0dXBQbGFjZUZpbHRlcigpO1xuICAgICAgICAgICAgICAgIHNlbGYuZ2V0RGF0YSgpO1xuICAgICAgICAgICAgICAgIHNlbGYuc2V0dXBMaXN0ZW5lcigpO1xuXG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgfTtcblxuICAgIGlmICghKCdtb2R1bGVzJyBpbiBhcHApKSB7XG4gICAgICAgIGFwcC5tb2R1bGVzID0ge307XG4gICAgfVxuXG4gICAgYXBwLm1vZHVsZXMuc2NoZWR1bGUgPSBuZXcgU2NoZWR1bGUoKTtcbn0pKCk7XG4iXX0=
